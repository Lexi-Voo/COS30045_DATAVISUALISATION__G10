<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Australia Drug Tests</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a2d9d6a6c4.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="navbar"></div>
    <div>

        <div id="stackedbarchart" class="responsive-svg-container"></div>
        <br>
        <br>
        <div id="mapLayout">
            <div id="sidebar">
                <div id="dropdown-container">
                    <label for="yearSelect">Select Year: </label>
                    <select id="yearSelect"></select>
                </div>

                <div id="infoBox">
                    <p>Jurisdiction: </p>
                    <div id="jurisdictionName">All Jurisdictions</div>
                    <p>Total License Holders: </p>
                    <div id="totalLicences">–</div>
                    <p>Total Positive Drug Tests: </p>
                    <div id="positiveTests">–</div>
                    <p>Rate (per 10,000 licenses): </p>
                    <div id="ratePer10k">–</div>
                </div>
            </div>

            <div id="choroplethmap" class="responsive-svg-container"></div>
        </div>
    </div>

    <div id="footer"></div>

  <script>
    function loadHTML(id, file) {
      fetch(file)
        .then(res => res.text())
        .then(data => {
          document.getElementById(id).innerHTML = data;

          const currentPage = window.location.pathname.split("/").pop();
          document.querySelectorAll(".nav-link").forEach(link => {
            const linkPage = link.getAttribute("href");
            link.classList.toggle("active", linkPage === currentPage);
          });
        })
        .catch(err => console.error(`Error loading ${file}:`, err));
    }

    loadHTML('navbar', 'components/navbar.html');
    loadHTML('footer', 'components/footer.html');
  </script>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="js/shared_constant.js"></script>
    <script src="js/stackedbarchart.js"></script>
    <script src="js/choroplethmap.js"></script>
    <script src="js/interaction.js"></script>
    <script src="js/load_data.js"></script>
</body>
</html>